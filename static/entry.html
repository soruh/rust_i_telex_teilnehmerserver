<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link href="/static/main.css" rel="stylesheet" />
    <script src="/static/api.js"></script>
    <title id="title">Eintrag</title>
  </head>
  <body>
    <a href="/static/index.html">zur√ºck</a>

    <form id="form"></form>

    <script>
      function main(is_logged_in) {
        let searchParams = new URLSearchParams(new URL(window.location).search);
        let number = parseInt(searchParams.get("number"));
        if (!number) {
          window.location = "/";
          return;
        }

        console.log("number:", number);
        lookupNumber(number, function(entry) {
          console.table(entry);

          document.getElementById("title").innerHTML = entry.name;

          let keys = is_logged_in
            ? [
                "number",
                "name",
                "extension",
                "ipaddress",
                "hostname",
                "client_type",
                "port",
                "timestamp",
                "disabled"
              ]
            : [
                "number",
                "name",
                "extension",
                "ipaddress",
                "hostname",
                "client_type",
                "port",
                "timestamp"
              ];

          let form = document.getElementById("form");
          console.log(keys);

          for (let key of keys) {
            let div = document.createElement("div");

            let value =
              key == "extension" ? stringifyExtension(entry[key]) : entry[key];

            let span = document.createElement("span");
            span.innerHTML = key;

            let input = document.createElement("input");
            input.value = value;

            div.append(span);
            div.append(input);

            form.append(div);
          }
        });
      }
    </script>
    <script src="/static/main.js"></script>
  </body>
</html>
